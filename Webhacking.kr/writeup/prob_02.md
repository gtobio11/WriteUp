# Webhacking.kr No.02

## 문제 출제의도

web 코드를 이해하고 쿠키를 조작하여 Blind SQL Injection을 할 수 있는지 확인한다.

## 문제 이해

페이지에 들어가면 이상한 화면이 출력되는데 이때 쿠키 값을 확인해보면 time이라는 쿠키 값이 생성되었음을 볼 수 있다.

또한 소스코드를 보면 나와있지는 않지만 용머리를 누르게 되면 admin 페이지로 이동할 수 있음을 볼 수 있다.

해당 페이지에서 비밀번호를 입력할 수 있는 것을 보니 문제의 해결 단서중 하나임을 느꼈다.

그리고 다시 index로 돌아가서 소스코드를 보면 주석처리되어 있는 시간이 있음을 알 수 있다. 이 또한 문제의 해결 단서중 하나일 것 같다.

그리고 메뉴를 둘러보다 보면 보드 부분에서 게시글을 들어가면 비밀글이라며 비밀번호를 입력하게 하는데 이 또한 문제의 해결 단서인 느낌이였다.

이제 다시 쿠키 값으로 돌아가서 and 연산으로 조작을 해보게 되면 거짓일때 <!--2070-01-01 09:00:00-->가 참일때 <!--2070-01-01 09:00:01-->가 출력됨을 알 수 있었다. 이를 이용해 Blind SQL Injection을 할 수 있을 것 같은 느낌이다.

form 태그안의 input을 보면 입력되는 값은 Password임을 추측할 수 있다.

이를 and 연산을 통해 Blind SQL Injection으로 답을 구하여 볼 수 있다.

그 전의 FreeB0aRd 테이블의 password 길이값과 admin 테이블의 password 길이값을 구해보기 위하여 쿠키에 
1515414399 and (select length(password) from FreeB0aRd) = * 와 1515414399 and (select length(password) from admin) = *
을 해보았는데 * 자리에 여러 숫자들을 대입하여 해본결과 FreeB0aRd 테이블의 password의 길이 값은 9, admin 테이블의 password 길이 값은 10 임을 알 수 있었다.

## 문제 해결 방안
사실 각 테이블의 password 길이 또한 일일히 구하기 어려운 것이므로 해당 문제의 password를 구하는 것은 파이썬 코드로 작성하였다.
해당 코드는 `../src/prob_02.py`이다. 출력되는 freeboard password를 freeboard의 게시물에 입력하여 다운받은 알집파일을 열기 위해서는 비밀번호가 필요한데 코드에서 출력되는 admin password를 main페이지에서 용을 누르면 이동되는 admin페이지에 입력하면 압축파일의 비밀번호를 출력하여 준다 해당하는 비밀번호를 압축 해제하는데 사용하면 html파일이 있고 그 html 파일을 열면 flag를 준다.

해당 flag를 auth에 입력하면 문제풀이에 해결된다.